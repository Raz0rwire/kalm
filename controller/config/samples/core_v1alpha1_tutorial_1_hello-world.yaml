apiVersion: v1
kind: Namespace
metadata:
  name: kalm-hello-world
  labels:
    istio-injection: enabled
    kalm-enabled: "true"
---
apiVersion: core.kalm.dev/v1alpha1
kind: Component
metadata:
  name: hello-world
  namespace: kalm-hello-world
spec:
  image: k8s.gcr.io/echoserver:1.10
  ports:
    - name: http
      containerPort: 8080
      servicePort: 80
  cpu: "10m"
  memory: "256Mi"
---
apiVersion: core.kalm.dev/v1alpha1
kind: HttpRoute
metadata:
  name: hello-world
  namespace: kalm-hello-world
spec:
  hosts:
    - "*"
  methods:
    - GET
    - POST
  schemes:
    - http
  paths:
    - /
  destinations:
    - host: hello-world
      weight: 1
  stripPath: true
